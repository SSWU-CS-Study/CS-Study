# 라우팅과 포워딩

네트워크 계층의 주된 역할은 데이터 패킷을 전송지에서 수신지까지 보내는 것이다. 
이때 필요한 두 가지 기능이 라우팅과 포워딩이다. 이는 라우터에서 수행한다.

> 라우팅은 출발지에서 목적지까지의 경로를 결정하는 것을 말하고
포워딩은 최적의 경로로 패킷을 이동시키는 것을 말한다.
> 

라우팅은 패킷을 전송할 수 있는 무수히 많은 경로 중에서 **최적의 경로**를 라우팅 알고리즘으로 선택해 **라우팅 테이블에 저장**하는 작업이고, 
포워딩은 포워딩 테이블에 적힌 수신지 주소에 대응된 **출력 포트로 패킷을 이동**시키는 것이다.

![라우터 구조](https://blog.kakaocdn.net/dn/QZhTx/btqZrfLgaP6/YX5YTaLz7wa9DL6ISdLQh1/img.png)

라우터 구조

## 라우팅

패킷을 전송할 수 있는 무수히 많은 경로 중에서 **최적의 경로**를 라우팅 알고리즘으로 선택해 **라우팅 테이블에 저장**

### 라우팅 방식

**정적 라우팅**

네트워크 관리자가 패킷의 경로를 수동으로 구성하는 방식. 네트워크 환경의 변화와 무관하게 같은 라우팅 경로가 유지된다.

트래픽 패턴이 예측가능하다는 장점이 있지만, 
라우터에 연결된 네트워크 정보가 변경되면 모든 라우터에 알려야 하므로 네트워크 규모가 커져 라우터가 많아지면 관리자가 입력해야 하는 정보도 함께 늘어나며, 대응이 다소 어렵다는 단점이 있다.

**동적 라우팅**

이웃 라우터 사이에서 **라우팅 프로토콜**을 이용해 네트워크 정보를 교환하고 라우팅 테이블을 자동으로 생성하는 방식이다.

정적 라우팅 방식에서의 불편함을 라우팅 정보 변화에 능동적으로 대처할 수 있도록 보완하였다.

### 라우팅 프로토콜

*AS : Autonomous System- 자치 시스템. 동일한 라우팅 프로토콜을 사용하며 하나의 체제로 관리되는 네트워크

**영역에 따른 구분**

![https://forum.huawei.com/enterprise/en/data/attachment/forum/202202/20/220105ixzb57vadd9u0587.jpg](https://forum.huawei.com/enterprise/en/data/attachment/forum/202202/20/220105ixzb57vadd9u0587.jpg)

- IGP(Interior Gateway Protocol)
    - AS 내부에서만 이루어지는 라우팅 프로토콜
    - RIP, IGRP, OSRF
- EGP(Exterior Gateway Protocol)
    - 다른 AS 상호 간에 경로정보를 교환하기 위한 라우팅 프로토콜
    - EGP, BGP

**알고리즘에 따른 구분**

- 거리벡터 라우팅 프로토콜
    - 이웃 라우터와 주기적으로 갱신정보를 주고받으며 전송지까지의 경로를 결정하는 프로토콜
    - 한 정보가 전체 라우터에 동기화되기까지 많은 시간이 걸린다.
    - 규모가 작은 네트워크에 적용된다.
- 링크상태 라우팅 프로토콜
    - 링크상태에 어떤 변화가 있을 때만 갱신정보를 보내면서 최선의 경로를 찾는다.

## 포워딩

포워딩은 포워딩 테이블에 적힌 수신지 주소에 대응된 **출력 포트로 패킷을 이동**

### 패킷의 이동 방식

![https://mblogthumb-phinf.pstatic.net/20120106_204/gogoleejb_1325847375890Rzsmg_PNG/3.png?type=w2](https://mblogthumb-phinf.pstatic.net/20120106_204/gogoleejb_1325847375890Rzsmg_PNG/3.png?type=w2)

- 직접전달
    - 패킷의 전송지와 최종 수신지가 같은 네트워크에 있는 경우
    - 마지막 라우터와 수신지 호스트 사이의 경우
- 간접전달
    - 패킷의 전송지와 최종 수신지가 서로 다른 네트워크에 있는 경우

### 포워딩 방식

포워딩을 하기 위해선 라우팅 테이블을 조사하게 된다. 하지만 오늘날과 같은 인터넷 환경에서는 라우팅 테이블에 들어가는 목록의 수가 너무 많아져 이를 해결하기 위한 방식이 추가로 개발되었다.

**다음 홉 방식**

![https://mblogthumb-phinf.pstatic.net/20120106_81/gogoleejb_1325847801472yPWmi_PNG/4.png?type=w2](https://mblogthumb-phinf.pstatic.net/20120106_81/gogoleejb_1325847801472yPWmi_PNG/4.png?type=w2)

- 라우팅 테이블에 전체 경로에 대한 정보 대신 다음 홉까지의 정보만 저장해 테이블의 내용을 줄이는 것

**네트워크 특정 방식**

![https://mblogthumb-phinf.pstatic.net/20120106_11/gogoleejb_1325847981772udXT0_PNG/5.png?type=w2](https://mblogthumb-phinf.pstatic.net/20120106_11/gogoleejb_1325847981772udXT0_PNG/5.png?type=w2)

- 수신지 네트워크의 주소만 저장하는 방법.
- 동일한 물리적 네트워크에 연결된 호스트를 모두 저장하는 호스트 특정 방식과 비교 가능
    - 경로를 검사하거나 보안 방법을 제공해야 할 때는 호스트 특정 방식을 사용한다.

**디폴트 라우팅 방식**

![https://mblogthumb-phinf.pstatic.net/20120106_60/gogoleejb_1325849070759EEFV1_PNG/6.png?type=w2](https://mblogthumb-phinf.pstatic.net/20120106_60/gogoleejb_1325849070759EEFV1_PNG/6.png?type=w2)

- 호스트 A에서 전송되는 패킷의 경로는 라우터 R1 또는 라우터 R2가 되어야 한다.
- 네트워크 N2에 연결된 호스트로 가는 패킷은 라우터 R1으로 보내지고, 나머지는 모두 라우터 R2로 보내질 것이다.
    
    ⇒ 네트워크 N2에 연결된 호스트로 가는 패킷 외에는 모두 라우터 R2로 전달되도록 지정
    

## 예상 질문

<details>
<summary> 패킷의 이동을 전달 방식에 따라 구분해 설명하시오.</summary>
  <div markdown="1">
     전송지와 최종 수신지가 서로 다른 네트워크에 연결되어 있는 경우, 최종 수신지가 연결된 네트워크의 라우터에 도달할 때까지 라우터에서 라우터로 간접 전달되며, 마지막 라우터와 호스트 사이에는 직접 전달이 수행됩니다.
    <br />
    - 직접 전달은 패킷의 전송지과 최종 수신지가 같은 네트워크에 있거나 마지막 라우터와 수신지 호스트 사이에 있을 경우 발생합니다.<br />
    - 간접 전달은 패킷의 전송지와 최종 수신지가 서로 다른 네트워크에 있을 때 발생합니다.
  </div>
</details>

<details>
<summary> 네트워크 계층에서 일어나는 포워딩 방식 중 네트워크 특정 방식의 장점을 호스트 특정 방식과 비교해 서술하시오.</summary>
  <div markdown="1">
   호스트 특정 방식에서는 동일한 물리적 네트워크에 연결된 호스트를 모두 저장합니다.<br />
   이와 달리 네트워크 특정 방식에서는 수신지 네트워크의 주소만 저장하므로 라우팅 테이블의 항목이 하나로 줄어드는 장점이 있습니다.
  </div>
</details>






## 참고자료

- [쉽게 설명한 라우팅과 포워딩](https://nenunena.tistory.com/52)
- [포워딩 이미지](https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=gogoleejb&logNo=20147648734)
