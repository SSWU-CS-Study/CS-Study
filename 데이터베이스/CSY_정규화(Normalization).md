### 함수 종속성

![Untitled](https://ifh.cc/g/C4DgVY.png)

x의 값에 대해 y의 값이 유일하게 결정될 때 **‘함수적으로 종속한다**(functionally dependent)’고 한다. 

학번 —> 학과 <br />
학번 —> 이름 <br />
수강 강좌 —> 강의실 <br />
학번, 수강 강좌 —> 중간고사 점수 <br />

---

## 정규화

이상 현상이 발생하는 릴레이션을 분해하여 이상현상을 없애는 과정

이상현상을 일으키는 함수 종속성의 유형에 따라 등급 분류

### 제 1 정규형

릴레이션의 모든 속성 값이 원자값을 가진다.

| 이름 | 취미 |
| --- | --- |
| 곽곽 | 인터넷 |
| 놕놕 | 음악, 쇼핑 |

⇒

| 이름 | 취미 |
| --- | --- |
| 곽곽 | 인터넷 |
| 놕놕 | 음악 |
| 놕놕 | 쇼핑 |

### 제 2 정규형

기본키가 복합키일 때, 복합키의 일부분이 다른 속성의 결정자인지 여부를 판단, 테이블의 모들 속성이 완전 함수적 종속을 만족해야 한다.

![Untitled](https://ifh.cc/g/C4DgVY.png)

현재 릴레이션에서 기본키는 모든 속성을 정의할 수 있는 (학번, 수강 강좌)인데 
이 기본키의 내부 속성이 다른 속성을 결정할 수 있는 결정자이므로 분해가 필요하다.

**수강 정보**

| 학번 | 수강 강좌 | 중간고사 점수 |
| --- | --- | --- |
| 101 | 데이터베이스 | 60 |
| 102 | 선형대수학 | 80 |
| 103 | 졸업작품연구 | 70 |
| 101 | 운영체제 | 50 |

**학생 정보**

| 학번 | 이름 | 학과 |
| --- | --- | --- |
| 101 | 가은 | 컴퓨터공학과 |
| 102 | 나은 | 수학과 |
| 103 | 라은 | 서양화과 |
| 101 | 가은 | 컴퓨터공학과 |

**강좌 정보**

| 수강 강좌 | 강의실 |
| --- | --- |
| 강의실 | 수303 |
| 선형대수학 | 수405 |
| 졸업작품연구 | 조601 |
| 운영체제 | 성205 |

여기서 **수강 정보**(학번, 수강 강좌, 성적)과 **학생정보**(학번, 이름, 학과), **강좌 정보**(수강 강좌, 강의실)로 분해하면 된다.

### 제 3 정규형

2NF가 진행된 테이블에서 이행적 종속을 없애기 위해 테이블을 분리하는 것

> 이행적 종속 : A → B, B → C면 A → C가 성립된다
> 

아래 두가지 조건을 만족시켜야 한다.

- 릴레이션이 2NF에 만족한다.
- **기본키가 아닌 속성들은 기본키에 의존한다.** 
(제 2 정규형은 기본키 내부에 불완전 함수 종속이 있을 경우를 해결하는 것, 제 3 정규형은 기본키 외의 속성이 다른 속성을 결정하는 경우를 해결하는 것이다.)

<img src="http://dl.dropbox.com/s/xtfoetv8hg6jn3f/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202018-12-03%2012.59.46.png" width=500 />
현재 테이블에서는 `Tournament`와 `Year`이 기본키다.

`Winner`는 이 두 복합키를 통해 결정된다.

하지만 `Winner Date of Birth`는 **기본키가 아닌 `Winner`에 의해 결정**되고 있다.

따라서 이는 3NF를 위반하고 있으므로 아래와 같이 분리해야 한다.

<img src="http://dl.dropbox.com/s/ks03nkc26nsffin/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202018-12-04%2014.51.39.png" width=700 />


### BCNF

릴레이션에 존재하는 함수 종속성에서 모든 결정자가 후보키이면 BCNF 정규형이다.

**특강수강**

| 학생번호 | 특강이름 | 교수 |
| --- | --- | --- |
| 501 | 소셜네트워크 | 박교수 |
| 502 | 인간과동물 | 김교수 |
| 401 | 창업전략 | 우교수 |
| 501 | 창업전략 | 심교수 |

(학생번호, 교수)가 자기 자신을 결정하는 **특강 신청 테이블**

| 학생번호 | 교수 |
| --- | --- |
| 501 | 박교수 |
| 502 | 김교수 |
| 401 | 우교수 |
| 501 | 심교수 |

교수가 특강 이름을 결정하는 **특강교수 테이블**

| 교수 | 특강이름 |
| --- | --- |
| 박교수 | 소셜네트워크 |
| 김교수 | 인간과동물 |
| 우교수 | 창업전략 |
| 심교수 | 창업전략 |

제 3 정규형은 만족한다. (학생번호가 특강을 결정하고, 특강이 교수를 결정하진 않으므로)

하지만 교수가 특강 이름을 결정할 수 있다는 문제 발생(교수가 더 자세한 정보이다)

(학생 번호, 특강 이름) → 교수
교수 → 특강 이름

### 정규화의 장/단점

- 장점 : 데이터의 중복을 최소화하여 이상현상을 방지할 수 있다.
- 단점 : 릴레이션 간의 연산이 많아질 수 있다는 단점이 있다.

---

## 예상 질문

<details>
<summary>정규화에 대해서 설명해 주세요.</summary>
<div markdown="1">       

    정규화란 RDBMS에서 중복을 최소화하기 위해 데이터를 분해하는 작업을 말합니다.
    정규화를 함으로써 이상현상을 방지할 수 있다는 장점이 있고, 릴레이션 간의 연산이 많아질 수 있다는 단점이 있습니다.

</div>
</details>
<details>
<summary>정규화의 종류에 대해서 설명해주세요.</summary>
<div markdown="1">       

   제 1 정규형 : 도메인이 원자값만을 포함함
  제 2 정규형 : 완전 함수적 종속
   제 3 정규형 : 기본키에 대해 이행적 종속 제거
   BCNF 정규형 : 모든 결정키가 후보키

</div>
</details>

<details>
<summary>함수의 종속성이란 무엇인가요?</summary>
<div markdown="1">       

  `X → Y` : 릴레이션 R에서 <b>X값을 알면 Y를 알 수 있고, X 값에 의해 Y값이 달라질 때</b>, Y는 X에 함수적 종속이다.

</div>
</details>
